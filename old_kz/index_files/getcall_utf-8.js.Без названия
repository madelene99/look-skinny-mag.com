/* jshint multistr: true */
!function(e){var t=!1
if("function"==typeof define&&define.amd,1,"object"==typeof exports,1,!t){var n=window.bgcCookies,i=window.bgcCookies=e()
i.noConflict=function(){return window.bgcCookies=n,i}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e]
for(var i in n)t[i]=n[i]}return t}function t(n){function i(t,s,o){var a
if("undefined"!=typeof document){if(arguments.length>1){if(o=e({path:"/"},i.defaults,o),"number"==typeof o.expires){var l=new Date
l.setMilliseconds(l.getMilliseconds()+864e5*o.expires),o.expires=l}o.expires=o.expires?o.expires.toUTCString():""
try{a=JSON.stringify(s),/^[\{\[]/.test(a)&&(s=a)}catch(e){}s=n.write?n.write(s,t):encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape)
var c=""
for(var r in o)o[r]&&(c+="; "+r,o[r]!==!0&&(c+="="+o[r]))
return document.cookie=t+"="+s+c}t||(a={})
for(var d=document.cookie?document.cookie.split("; "):[],g=/(%[0-9A-Z]{2})+/g,p=0;p<d.length;p++){var u=d[p].split("="),f=u.slice(1).join("=")
'"'===f.charAt(0)&&(f=f.slice(1,-1))
try{var v=u[0].replace(g,decodeURIComponent)
if(f=n.read?n.read(f,v):n(f,v)||f.replace(g,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch(e){}if(t===v){a=f
break}t||(a[v]=f)}catch(e){}}return a}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}return t(function(){})}),function(d,w,s){function sendXHR(e,t,n){e="object"==typeof e?e:{},e.url=e.url||window.location.toString(),e.type="POST"===e.type?e.type:"GET",e.timeout=1e3*(e.timeout>0?parseInt(e.timeout):10),e.async=e.async!==!1||e.async,e.headers="object"==typeof e.headers?e.headers:{},e.dataType=["json","text"].indexOf(e.dataType)!==-1?e.dataType:"text"
var i,s=getXHR(),o=null
if("object"==typeof e.data){var a=binotelJqMini.param(e.data)
"GET"===e.type&&""!==a?e.url=(e.url+"&"+a).replace(/[&?]{1,2}/,"?"):"POST"===e.type&&""!==a&&(e.headers["Content-Type"]||(e.headers["Content-Type"]="application/x-www-form-urlencoded"),o=a)}s.onreadystatechange=function(){if(4==s.readyState)if(clearTimeout(i),200==s.status)if("json"==e.dataType)try{t(JSON.parse(s.responseText))}catch(e){n(s,"parsererror")}else"text"==e.dataType&&t(s.responseText)
else n(s,s.statusText)},s.open(e.type,e.url,e.async)
for(headerName in e.headers)s.setRequestHeader(headerName,e.headers[headerName])
e.timeout>0&&(i=setTimeout(function(){s.onreadystatechange=function(){},s.abort(),n(s,"timeout")},e.timeout)),s.send(o)}function getXHR(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml3.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}return null}!function(e){"use strict"
var t=-1,n={onVisible:function(e){var t=n.isSupported()
if(!t||!n.hidden())return e(),t
var i=n.change(function(t,s){n.hidden()||(n.unbind(i),e())})
return i},change:function(e){if(!n.isSupported())return!1
t+=1
var i=t
return n._callbacks[i]=e,n._listen(),i},unbind:function(e){delete n._callbacks[e]},afterPrerendering:function(e){var t=n.isSupported(),i="prerender"
if(!t||i!=n.state())return e(),t
var s=n.change(function(t,o){i!=o&&(n.unbind(s),e())})
return s},hidden:function(){return!(!n._doc.hidden&&!n._doc.webkitHidden)},state:function(){return n._doc.visibilityState||n._doc.webkitVisibilityState||"visible"},isSupported:function(){return!(!n._doc.visibilityState&&!n._doc.webkitVisibilityState)},_doc:document||{},_callbacks:{},_change:function(e){var t=n.state()
for(var i in n._callbacks)n._callbacks[i].call(n._doc,e,t)},_listen:function(){if(!n._init){var e="visibilitychange"
n._doc.webkitVisibilityState&&(e="webkit"+e)
var t=function(){n._change.apply(n,arguments)}
n._doc.addEventListener?n._doc.addEventListener(e,t):n._doc.attachEvent(e,t),n._init=!0}}}
"undefined"!=typeof module&&module.exports,e.bgcVisibility=n}(this),function(e){"use strict"
var t=-1,n=function(n){return n.every=function(e,i,s){n._time(),s||(s=i,i=null),t+=1
var o=t
return n._timers[o]={visible:e,hidden:i,callback:s},n._run(o,!1),n.isSupported()&&n._listen(),o},n.stop=function(e){return!!n._timers[e]&&(n._stop(e),delete n._timers[e],!0)},n._timers={},n._time=function(){n._timed||(n._timed=!0,n._wasHidden=n.hidden(),n.change(function(){n._stopRun(),n._wasHidden=n.hidden()}))},n._run=function(t,i){var s,o=n._timers[t]
if(n.hidden()){if(null===o.hidden)return
s=o.hidden}else s=o.visible
var a=function(){o.last=new Date,o.callback.call(e)}
if(i){var l=new Date,c=l-o.last
s>c?o.delay=setTimeout(function(){a(),o.id=setInterval(a,s)},s-c):(a(),o.id=setInterval(a,s))}else o.id=setInterval(a,s)},n._stop=function(e){var t=n._timers[e]
clearInterval(t.id),clearTimeout(t.delay),delete t.id,delete t.delay},n._stopRun=function(e){var t=n.hidden(),i=n._wasHidden
if(t&&!i||!t&&i)for(var s in n._timers)n._stop(s),n._run(s,!t)},n}
"undefined"!=typeof module&&module.exports,n(e.bgcVisibility)}(window),!function(e){function t(){var e=arguments[0],n=t.cache
return n[e]&&n.hasOwnProperty(e)||(n[e]=t.parse(e)),t.format.call(null,n[e],arguments)}function n(e){return"number"==typeof e?"number":"string"==typeof e?"string":Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function i(e,t){return t>=0&&7>=t&&a[e]?a[e][t]:Array(t+1).join(e)}var s={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/bcdiefguxX/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/}
t.format=function(e,o){var a,l,c,r,d,g,p,u=1,f=e.length,v="",m=[],b=!0,h=""
for(l=0;f>l;l++)if(v=n(e[l]),"string"===v)m[m.length]=e[l]
else if("array"===v){if(r=e[l],r[2])for(a=o[u],c=0;c<r[2].length;c++){if(!a.hasOwnProperty(r[2][c]))throw new Error(t('[sprintf] property "%s" does not exist',r[2][c]))
a=a[r[2][c]]}else a=r[1]?o[r[1]]:o[u++]
if(s.not_type.test(r[8])&&s.not_primitive.test(r[8])&&"function"==n(a)&&(a=a()),s.numeric_arg.test(r[8])&&"number"!=n(a)&&isNaN(a))throw new TypeError(t("[sprintf] expecting number but found %s",n(a)))
switch(s.number.test(r[8])&&(b=a>=0),r[8]){case"b":a=parseInt(a,10).toString(2)
break
case"c":a=String.fromCharCode(parseInt(a,10))
break
case"d":case"i":a=parseInt(a,10)
break
case"j":a=JSON.stringify(a,null,r[6]?parseInt(r[6]):0)
break
case"e":a=r[7]?parseFloat(a).toExponential(r[7]):parseFloat(a).toExponential()
break
case"f":a=r[7]?parseFloat(a).toFixed(r[7]):parseFloat(a)
break
case"g":a=r[7]?parseFloat(a).toPrecision(r[7]):parseFloat(a)
break
case"o":a=a.toString(8)
break
case"s":a=String(a),a=r[7]?a.substring(0,r[7]):a
break
case"t":a=String(!!a),a=r[7]?a.substring(0,r[7]):a
break
case"T":a=n(a),a=r[7]?a.substring(0,r[7]):a
break
case"u":a=parseInt(a,10)>>>0
break
case"v":a=a.valueOf(),a=r[7]?a.substring(0,r[7]):a
break
case"x":a=parseInt(a,10).toString(16)
break
case"X":a=parseInt(a,10).toString(16).toUpperCase()}s.json.test(r[8])?m[m.length]=a:(!s.number.test(r[8])||b&&!r[3]?h="":(h=b?"+":"-",a=a.toString().replace(s.sign,"")),g=r[4]?"0"===r[4]?"0":r[4].charAt(1):" ",p=r[6]-(h+a).length,d=r[6]&&p>0?i(g,p):"",m[m.length]=r[5]?h+a+d:"0"===g?h+d+a:d+h+a)}return m.join("")},t.cache={},t.parse=function(e){for(var t=e,n=[],i=[],o=0;t;){if(null!==(n=s.text.exec(t)))i[i.length]=n[0]
else if(null!==(n=s.modulo.exec(t)))i[i.length]="%"
else{if(null===(n=s.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder")
if(n[2]){o|=1
var a=[],l=n[2],c=[]
if(null===(c=s.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key")
for(a[a.length]=c[1];""!==(l=l.substring(c[0].length));)if(null!==(c=s.key_access.exec(l)))a[a.length]=c[1]
else{if(null===(c=s.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key")
a[a.length]=c[1]}n[2]=a}else o|=2
if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported")
i[i.length]=n}t=t.substring(n[0].length)}return i}
var o=function(e,n,i){return i=(n||[]).slice(0),i.splice(0,0,e),t.apply(null,i)},a={0:["","0","00","000","0000","00000","000000","0000000"]," ":[""," ","  ","   ","    ","     ","      ","       "],_:["","_","__","___","____","_____","______","_______"]}
"undefined"!=typeof exports,e.sprintf=t,e.vsprintf=o,"function"==typeof define&&define.amd&&!1&&define(function(){return{sprintf:t,vsprintf:o}})}("undefined"==typeof window?this:window)
var bgcConfig
for(var index in w.BinotelGetCall)if(w.BinotelGetCall[index].initState===!1){w.BinotelGetCall[index].initState="processing",bgcConfig=w.BinotelGetCall[index]
break}if(bgcConfig){if(console.log("Binotel Get Call in processing!!! Widget initiator is %s",bgcConfig.widgetId),w.BinotelGetCallSettings&&w.BinotelGetCallSettings.language&&(bgcConfig.language=w.BinotelGetCallSettings.language),bgcConfig.customI18nDictionary)try{bgcConfig.customI18nDictionary=JSON.parse(bgcConfig.customI18nDictionary)}catch(e){console.log(e)}var bgc
setTimeout(function(){bgc=new BinotelGetCall,bgc.init(),bgcConfig.openPassiveForm=bgc.openPassiveForm},100)
var BinotelGetCall=function(){var self={helpers:{},countdownTimerIntervalLink:null,timerForShowAndHideTooltip:null,cookies:w.bgcCookies.noConflict(),activityData:{pageviews:1,callWasMade:0,onPage:0,activeFormAdder:0,phoneButtonTooltipTimeoutOnFirstDisplay:65,phoneButtonTooltipTimeoutOnSecondDisplay:0,phoneButtonTooltipTimeoutAdderOnSecondDisplay:115,phoneButtonTooltipStage:0,phoneButtonTooltipDisplayingTime:0,phoneButtonTooltipAdder:0},timers:{rotatePhoneButtonTimer:null},workingDays:[],gaObject:null}
return this.init=function(){self.helpers.init(),setInterval(function(){self.helpers.setClientSideTimeOffset(!0)},18e5)},this.openPassiveForm=function(e,t){self.helpers.openPassiveForm(e,t)},self.helpers.init=function(){bgcConfig.clientSideTimezoneOffset=60*(new Date).getTimezoneOffset(),bgcConfig.clientSideTimeOffset=bgcConfig.timestampOnServerIsNow-Math.floor(Date.now()/1e3)
var e=self.helpers.getModeOfWorkingHours()
if("alwaysOffline"!==e||"1"!==bgcConfig.switchedOffInOffline){var t=d.createElement("div")
t.className="bingc-passive bingc-passive-closed bingc-language-"+bgcConfig.language,t.id="bingc-passive",t.innerHTML=' \t\t\t\t<div class="bingc-passive-overlay"> \t\t\t\t\t<a class="bingc-passive-close-button" id="bingc-passive-close-button" href="javascript:void(0);"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><polygon fill="#FFFFFF" points="24,0.993 22.985,-0.024 12,10.983 1.015,-0.024 0,0.993 10.985,12 0,23.008 1.015,24.023 12,13.017 22.985,24.023 24,23.008 13.015,12 "/></svg></a> \t\t\t\t\t<div class="bingc-passive-content" id="bingc-passive-content"></div> \t\t\t\t\t<a href="http://www.binotel.ua/getcall?utm_source='+bgcConfig.domain+'&utm_medium=client_getcall&utm_campaign=client_getcall_passive_overlay" target="_blank" class="bingc-powered-by"><span class="bingc-powered-by-text">'+self.helpers.i18n("Виртуальная АТС")+'</span></a> \t\t\t\t</div> \t\t\t\t<div class="bingc-passive-background" id="bingc-passive-background"></div> \t\t\t\t\t\t\t\t\t'
var n=d.createElement("div")
n.className="bingc-active bingc-active-closed bingc-language-"+bgcConfig.language,n.id="bingc-active",n.innerHTML=' \t\t\t\t<div class="bingc-active-overlay"> \t\t\t\t\t<div class="bingc-active-content" id="bingc-active-content"></div> \t\t\t\t</div> \t\t\t\t<a class="bingc-active-close-button" id="bingc-active-close-button" href="javascript:void(0);"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve"><polygon points="24,0.993 22.985,-0.024 12,10.983 1.015,-0.024 0,0.993 10.985,12 0,23.008 1.015,24.023 12,13.017 22.985,24.023 24,23.008 13.015,12 "/></svg></a> \t\t\t\t<a href="http://www.binotel.ua/getcall?utm_source='+bgcConfig.domain+'&utm_medium=client_getcall&utm_campaign=client_getcall_active_overlay" target="_blank" class="bingc-powered-by"><span class="bingc-powered-by-text">'+self.helpers.i18n("Виртуальная АТС")+"</span></a> \t\t\t\t\t\t\t\t\t"
var i=d.createElement("a")
i.className="bingc-phone-button bingc-language-"+bgcConfig.language,i.id="bingc-phone-button",i.style[bgcConfig.phoneButtonPositionInVertical.property]=bgcConfig.phoneButtonPositionInVertical.value+"%",i.style[bgcConfig.phoneButtonPositionInHorizontal.property]=bgcConfig.phoneButtonPositionInHorizontal.value+"%",1===bgcConfig.phoneButtonDisplay&&i.classList.add("bingc-show")
var s
"alwaysOnline"===e?s=sprintf(self.helpers.i18n("Хотите, перезвоним Вам<br>за %s секунд?"),bgcConfig.countdownTimerForCall):"alwaysOffline"===e&&(s=self.helpers.i18n("Хотите, перезвоним Вам<br>в удобное время?"))
var o
"top"===bgcConfig.phoneButtonPositionInVertical.property&&"left"===bgcConfig.phoneButtonPositionInHorizontal.property?o='\t\t\t\t\t<div id="bingc-phone-button-tooltip" class="bingc-phone-button-tooltip bingc-phone-button-tooltip-top-left"> \t\t\t\t\t\t'+s+' \t\t\t\t\t\t<svg version="1.1" class="bingc-phone-button-arrow" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18 14" enable-background="new 0 0 18 14" xml:space="preserve"><polyline fill="#B3B3B3" points="0,14 18,14 0,0 "/></svg> \t\t\t\t\t</div> \t\t\t\t':"top"===bgcConfig.phoneButtonPositionInVertical.property&&"right"===bgcConfig.phoneButtonPositionInHorizontal.property?o='\t\t\t\t\t<div id="bingc-phone-button-tooltip" class="bingc-phone-button-tooltip bingc-phone-button-tooltip-top-right"> \t\t\t\t\t\t'+s+' \t\t\t\t\t\t<svg version="1.1" class="bingc-phone-button-arrow" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18 14" enable-background="new 0 0 18 14" xml:space="preserve"><polyline fill="#B3B3B3" points="17.977,14 0,14 17.977,0 "/></svg> \t\t\t\t\t</div> \t\t\t\t':"bottom"===bgcConfig.phoneButtonPositionInVertical.property&&"left"===bgcConfig.phoneButtonPositionInHorizontal.property?o='\t\t\t\t\t<div id="bingc-phone-button-tooltip" class="bingc-phone-button-tooltip bingc-phone-button-tooltip-bottom-left"> \t\t\t\t\t\t'+s+' \t\t\t\t\t\t<svg version="1.1" class="bingc-phone-button-arrow" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18 14" enable-background="new 0 0 18 14" xml:space="preserve"><polyline fill="#B3B3B3" points="17.977,0 0.083,0 17.977,13.927 "/></svg> \t\t\t\t\t</div> \t\t\t\t':"bottom"===bgcConfig.phoneButtonPositionInVertical.property&&"right"===bgcConfig.phoneButtonPositionInHorizontal.property&&(o='\t\t\t\t\t<div id="bingc-phone-button-tooltip" class="bingc-phone-button-tooltip bingc-phone-button-tooltip-bottom-right"> \t\t\t\t\t\t'+s+' \t\t\t\t\t\t<svg version="1.1" class="bingc-phone-button-arrow" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 18 14" enable-background="new 0 0 18 14" xml:space="preserve"><polyline fill="#B3B3B3" points="0,0 17.936,0 0,14.012 "/></svg> \t\t\t\t\t</div> \t\t\t\t'),i.innerHTML=o+' \t\t\t\t<svg class="bingc-phone-button-circle" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><circle class="bingc-phone-button-circle-outside" cx="50" cy="50" r="50"/><circle class="bingc-phone-button-circle-inside" cx="50" cy="50" r="40"/></svg> \t\t\t\t<div id="bingc-phone-button-icon-text" class="bingc-phone-button-icon-text"><span>'+self.helpers.i18n("КНОПКА<br>СВЯЗИ")+'</span></div> \t\t\t\t<svg id="bingc-phone-button-icon-icon" class="bingc-phone-button-icon-icon bingc-phone-button-icon-show" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 17.544 25.215" enable-background="new 0 0 17.544 25.215" xml:space="preserve"><path fill-rule="evenodd" clip-rule="evenodd" fill="#fff" d="M12.22,6.784c-0.135,0.871-1.654,4.073-2.084,4.89c-0.576,1.087-2.779,4.344-3.724,5.065l0,0l-0.775,0.532l-1.879-0.616L0,20.653l0.129,1.043l2.123,2.832l0.916,0.687c0,0,13.474-8.596,14.376-24.03c0,0-0.266-0.297-0.777-0.87L13.228,0l-1.16,0.454l-1.029,4.941l1.127,1.23"/></svg>',d.getElementsByTagName("body")[0].appendChild(t),d.getElementsByTagName("body")[0].appendChild(n),d.getElementsByTagName("body")[0].appendChild(i),d.getElementById("bingc-passive-background").addEventListener("click",function(){self.activityData.activeFormAdder=40,self.helpers.closePassiveForm()}),d.getElementById("bingc-passive-close-button").addEventListener("click",function(){self.activityData.activeFormAdder=40,self.helpers.closePassiveForm()}),d.getElementById("bingc-phone-button").addEventListener("click",function(){self.helpers.openPassiveForm(),clearTimeout(self.helpers.timerForShowAndHideTooltip),self.helpers.hidePhoneButtonTooltip()}),d.getElementById("bingc-phone-button").addEventListener("mouseenter",function(){self.helpers.showPhoneButtonTooltip()}),d.getElementById("bingc-phone-button").addEventListener("mouseleave",function(){self.helpers.hidePhoneButtonTooltip()}),d.getElementById("bingc-active-close-button").addEventListener("click",function(){self.activityData.phoneButtonTooltipAdder=60,self.helpers.closeActiveForm()}),setTimeout(function(){for(var e=d.getElementsByClassName("bingc-action-open-passive-form"),t=0;t<e.length;t++)e[t].addEventListener("click",function(e){self.helpers.isOpenedActiveForm()&&self.helpers.closeActiveForm()
try{self.helpers.openPassiveForm(this.getAttribute("data-getcall-title-in-working-hours"),this.getAttribute("data-getcall-description")),clearTimeout(self.helpers.timerForShowAndHideTooltip),self.helpers.hidePhoneButtonTooltip()}catch(e){}})},1e3)
var a=self.cookies.getJSON("bingc-activity-data")
a&&(self.activityData.pageviews=(parseInt(a.pageviews)||0)+1,self.activityData.callWasMade=parseInt(a.callWasMade)||0)
var l=3
bgcVisibility.every(1e3*l,function(){self.activityData.onPage+=l,1===bgcConfig.phoneButtonDisplay&&(0!==self.activityData.phoneButtonTooltipAdder&&(self.activityData.phoneButtonTooltipAdder-=l,self.activityData.phoneButtonTooltipAdder=self.activityData.phoneButtonTooltipAdder>=0?self.activityData.phoneButtonTooltipAdder:0),self.activityData.phoneButtonTooltipDisplayingTime&&(self.activityData.phoneButtonTooltipDisplayingTime>=12?(self.activityData.phoneButtonTooltipDisplayingTime=0,self.helpers.hidePhoneButtonTooltip()):self.activityData.phoneButtonTooltipDisplayingTime+=l),0===self.activityData.phoneButtonTooltipAdder&&self.helpers.isOpenedPassiveForm()===!1&&self.helpers.isOpenedActiveForm()===!1&&(self.activityData.onPage>=self.activityData.phoneButtonTooltipTimeoutOnFirstDisplay&&0===self.activityData.phoneButtonTooltipStage?(self.activityData.phoneButtonTooltipDisplayingTime=1,self.activityData.phoneButtonTooltipStage=1,self.activityData.phoneButtonTooltipTimeoutOnSecondDisplay=self.activityData.onPage+self.activityData.phoneButtonTooltipTimeoutAdderOnSecondDisplay,self.helpers.showPhoneButtonTooltip()):self.activityData.onPage>=self.activityData.phoneButtonTooltipTimeoutOnSecondDisplay&&1===self.activityData.phoneButtonTooltipStage&&(self.activityData.phoneButtonTooltipDisplayingTime=1,self.activityData.phoneButtonTooltipStage=2,self.helpers.showPhoneButtonTooltip())))
var e=self.cookies.getJSON("bingc-activity-data")
if(e?(e.pageviews=self.activityData.pageviews,e.callWasMade=self.activityData.callWasMade,e.updatedAt=Math.floor(Date.now()/1e3)):e={numberOfImpressions:0,activeFormSinceLastDisplayed:0,pageviews:self.activityData.pageviews,callWasMade:self.activityData.callWasMade,updatedAt:Math.floor(Date.now()/1e3)},1===bgcConfig.activeFormStatus&&0===e.callWasMade&&self.helpers.isOpenedPassiveForm()===!1&&self.helpers.isOpenedActiveForm()===!1){e.activeFormSinceLastDisplayed+=l,0!==self.activityData.activeFormAdder&&(self.activityData.activeFormAdder-=l,self.activityData.activeFormAdder=self.activityData.activeFormAdder>=0?self.activityData.activeFormAdder:0)
self.helpers.getModeOfWorkingHours()
0===self.activityData.activeFormAdder&&0===e.numberOfImpressions&&e.activeFormSinceLastDisplayed>=bgcConfig.activeFormTimeoutOfFirstVisit&&(self.activityData.onPage>=bgcConfig.activeFormTimeoutOnPageWithLowPageview||e.pageviews>=bgcConfig.activeFormHighPageviewCount&&self.activityData.onPage>=bgcConfig.activeFormTimeoutOnPageWithHighPageview)?(self.helpers.openActiveForm(),e.numberOfImpressions++,e.activeFormSinceLastDisplayed=0):0===self.activityData.activeFormAdder&&e.numberOfImpressions>0&&e.numberOfImpressions<bgcConfig.activeFormMaxNumberOfImpressions&&e.activeFormSinceLastDisplayed>=bgcConfig.activeFormTimeoutOfRepeatVisit&&(self.activityData.onPage>=bgcConfig.activeFormTimeoutOnPageWithLowPageview||e.pageviews>=bgcConfig.activeFormHighPageviewCount&&self.activityData.onPage>=bgcConfig.activeFormTimeoutOnPageWithHighPageview)&&(self.helpers.openActiveForm(),e.numberOfImpressions++,e.activeFormSinceLastDisplayed=0)}self.cookies.set("bingc-activity-data",e,{expires:.5})}),self.helpers.rotatePhoneButton(),bgcConfig.initState="success"}},self.helpers.openPassiveForm=function(e,t){self.helpers.sendEventToGa("Opened passive form","",void 0,!0)
var n={1:self.helpers.i18n("Понедельник"),2:self.helpers.i18n("Вторник"),3:self.helpers.i18n("Среда"),4:self.helpers.i18n("Четверг"),5:self.helpers.i18n("Пятница"),6:self.helpers.i18n("Суббота"),0:self.helpers.i18n("Воскресенье")},i=self.helpers.getModeOfWorkingHours()
if("alwaysOnline"===i){e||(e=sprintf(self.helpers.i18n("Хотите, перезвоним Вам за <b>%s</b> секунд?"),bgcConfig.countdownTimerForCall))
var s=' \t\t\t\t\t<div class="bingc-we-will-call-you"><div class="bingc-we-will-call-you-alignment"><div class="bingc-we-will-call-you-restriction">'+e+'</div></div></div> \t\t\t\t\t<div class="bingc-passive-get-phone-form"> \t\t\t\t\t\t<form id="bingc-passive-get-phone-form" class="bingc-passive-get-phone-form"> \t\t\t\t\t\t\t<div class="bingc-passive-get-phone-form-input-border"></div> \t\t\t\t\t\t\t<input type="tel" id="bingc-passive-get-phone-form-input" class="bingc-passive-get-phone-form-input" placeholder="'+self.helpers.i18n("Ваш номер телефона")+'" value="'+bgcConfig.externalNumberInputValue+'" autocomplete="off" onfocus="this.value = this.value;"><a href="javascript:void(0);" id="bingc-passive-phone-form-button" class="bingc-passive-phone-form-button">'+self.helpers.i18n("Перезвоните")+'</a><span class="bingc-sample-countdown-timer"><span>00:</span>'+(bgcConfig.countdownTimerForCall-1)+'<span>:99</span></span> \t\t\t\t\t\t\t<input type="hidden" id="bingc-passive-get-phone-form-description" class="bingc-passive-get-phone-form-description" value="'+(t||"")+'"> \t\t\t\t\t\t</form> \t\t\t\t\t</div> \t\t\t\t\t<div id="bingc-phone-sample" class="bingc-phone-sample"><span>'+self.helpers.i18n("Например:")+" "+bgcConfig.externalNumberExample+"</span></div> \t\t\t\t\t\t\t\t\t\t\t  "
1===bgcConfig.statisticsDisplay&&(s+=' \t\t\t\t\t<div class="bingc-statistics">'+self.helpers.i18n("Свободных операторов на линии:")+" "+bgcConfig.freeEmployees+"<br>"+self.helpers.i18n("Заказов звонков сегодня:")+" "+bgcConfig.callsProcessedToday+"</div> \t\t\t\t\t\t\t\t\t\t\t   "),d.getElementById("bingc-passive-content").innerHTML=s,d.getElementById("bingc-passive-phone-form-button").addEventListener("click",function(e){var t=d.getElementById("bingc-passive-get-phone-form-input").value
if(t=t.toString().replace(/\D/g,""),self.helpers.isCorrectExternalNumber(t)){d.getElementById("bingc-passive-get-phone-form-input").classList.remove("warning")
var n,i
try{n=w.BinotelInformationAboutTheVisitor.getVisitorData(),i=w.BinotelInformationAboutTheVisitor.getGoogleAnalyticsData()}catch(e){console.error(e)}sendXHR({type:"POST",url:bgcConfig.backendHost+"/getcall/call/",data:{widgetID:bgcConfig.widgetId,externalNumber:t,sessionId:bgcConfig.sessionId,visitorData:n,description:d.getElementById("bingc-passive-get-phone-form-description").value,googleAnalyticsData:i},dataType:"json"},function(e){e&&"success"===e.status?(self.helpers.sendEventToGa("Call requested","gc-"+e.GetCallID),self.activityData.callWasMade=1,d.getElementById("bingc-passive-content").innerHTML=' \t\t\t\t\t\t\t\t\t<div class="bingc-we-already-call-you">'+self.helpers.i18n("Заказ звонка принят. Мы Вам уже звоним!")+'</div> \t\t\t\t\t\t\t\t\t<div id="bingc-passive-countdown-timer" class="bingc-passive-countdown-timer">00:'+(bgcConfig.countdownTimerForCall-1)+":99</div> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  ",setTimeout(function(){var e,t,n,i=100*(bgcConfig.countdownTimerForCall-1)+99
self.countdownTimerIntervalLink=setInterval(function(){i-=1,e=i.toString(),t=Math.floor(i/100),t<10&&(t="0"+t),n=e.slice(-2),n.length<2&&(n="0"+n),d.getElementById("bingc-passive-countdown-timer").innerHTML="00:"+t+":"+n,0===i&&clearInterval(self.countdownTimerIntervalLink)},10)},100)):d.getElementById("bingc-passive-content").innerHTML=' \t\t\t\t\t\t\t\t\t<div class="bingc-something-went-wrong">'+self.helpers.i18n("К сожалению, что-то пошло не так.<br>Пожалуйста, обновите страницу.")+"</div> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  "},function(e,t){console.log(t,e),d.getElementById("bingc-passive-content").innerHTML=' \t\t\t\t\t\t\t\t<div class="bingc-something-went-wrong">'+self.helpers.i18n("К сожалению, что-то пошло не так.<br>Пожалуйста, обновите страницу.")+"</div> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  "})}else d.getElementById("bingc-passive-get-phone-form-input").classList.add("warning"),d.getElementById("bingc-passive-get-phone-form-input").focus()})}else if("alwaysOffline"===i){self.workingDays=[]
for(var o=0;o<=9;o++){for(var a={},l=0;l<=23;l++)for(var c=0;c<=45;c+=15){var r=new Date(1e3*(Math.floor(Date.now()/1e3)+bgcConfig.widgetTimezoneOffset+bgcConfig.clientSideTimezoneOffset+bgcConfig.clientSideTimeOffset)),g=new Date(1e3*(Math.floor(Date.now()/1e3)+bgcConfig.widgetTimezoneOffset+bgcConfig.clientSideTimezoneOffset+bgcConfig.clientSideTimeOffset))
if(g.setHours(l),g.setMinutes(c),g.setSeconds(0),g.setDate(r.getDate()+o),!(0===o&&r.getHours()>=l)&&BinotelHelperPbx.checkingTimeOnTimeline(bgcConfig.rulesOfWorkingHours,Math.floor(g.getTime()/1e3))===!0){if("undefined"==typeof a.dayName){var p
p=0===o?self.helpers.i18n("Сегодня"):1===o?self.helpers.i18n("Завтра"):n[g.getDay()],a={dayName:p,workingHoursOrderedList:[],workingHours:{},addingDays:o}}var u=g.getHours().toString().length<=1?"0"+g.getHours():g.getHours().toString()
"undefined"==typeof a.workingHours[u]&&(a.workingHours[u]=[],a.workingHoursOrderedList.push(u)),a.workingHours[u].push(0===g.getMinutes()?"00":g.getMinutes())}}if("undefined"!=typeof a.dayName&&(self.workingDays.push(a),3===self.workingDays.length))break}var f="",v="",m=""
if(self.workingDays.length){f='<div id="bingc-passive-date-selection-select-day" class="bingc-passive-date-selection-select-day"><span id="bingc-passive-date-selection-selected-day" class="bingc-passive-date-selection-selected-day">'+self.workingDays[0].dayName+'</span><svg class="bingc-passive-date-selection-arrows" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 10 14" enable-background="new 0 0 10 14" xml:space="preserve"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.99,8.905L4.995,13.9L0,8.905"/></svg><input type="hidden" id="bingc-passive-date-selection-selected-day-index" value="0"><div id="bingc-passive-date-selection-select-day-list-of-days-container" class="bingc-passive-date-selection-select-day-list-of-days-container"><ul id="bingc-passive-date-selection-select-day-list-of-days" class="bingc-passive-date-selection-select-day-list-of-days">'
for(var o=0;o<self.workingDays.length;o++)f+='<li value="'+o+'">'+self.workingDays[o].dayName+"</li>"
f+="</ul></div></div>"
var b=Object.keys(self.workingDays[0].workingHours).length
if(v='<div id="bingc-passive-date-selection-select-hour" class="bingc-passive-date-selection-select-hour"><span id="bingc-passive-date-selection-selected-hour" class="bingc-passive-date-selection-selected-hour">'+self.workingDays[0].workingHoursOrderedList[0]+'</span><svg class="bingc-passive-date-selection-arrows" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 10 14" enable-background="new 0 0 10 14" xml:space="preserve"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.99,8.905L4.995,13.9L0,8.905"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0,4.995L4.995,0L9.99,4.995"/></svg><div id="bingc-passive-date-selection-select-hour-list-of-hours-container" class="bingc-passive-date-selection-select-hour-list-of-hours-container '+(b>=10&&b<=18?"two-columns":b>=19?"three-columns":"")+'"><ul class="bingc-passive-date-selection-select-hour-list-of-hours '+(b<10?"only-one-column":"")+'">',b)for(var o=0;o<self.workingDays[0].workingHoursOrderedList.length;o++)9===o?v+='</ul><ul class="bingc-passive-date-selection-select-hour-list-of-hours second-column">':18===o&&(v+='</ul><ul class="bingc-passive-date-selection-select-hour-list-of-hours third-column">'),v+="<li>"+self.workingDays[0].workingHoursOrderedList[o]+"</li>"
if(v+="</ul></div></div>",b&&self.workingDays[0].workingHours[self.workingDays[0].workingHoursOrderedList[0]]){var h=self.workingDays[0].workingHours[self.workingDays[0].workingHoursOrderedList[0]]
m='<div id="bingc-passive-date-selection-select-minutes" class="bingc-passive-date-selection-select-minutes"><span id="bingc-passive-date-selection-selected-minutes" class="bingc-passive-date-selection-selected-minutes">'+h[0]+'</span><svg class="bingc-passive-date-selection-arrows" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 10 14" enable-background="new 0 0 10 14" xml:space="preserve"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.99,8.905L4.995,13.9L0,8.905"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0,4.995L4.995,0L9.99,4.995"/></svg><div id="bingc-passive-date-selection-select-minutes-list-of-minutes-container" class="bingc-passive-date-selection-select-minutes-list-of-minutes-container"><ul class="bingc-passive-date-selection-select-minutes-list-of-minutes">'
for(var o=0;o<h.length;o++)m+="<li>"+h[o]+"</li>"
m+="</ul></div></div>"}}d.getElementById("bingc-passive-content").innerHTML=' \t\t\t\t\t<div class="bingc-we-will-call-you bingc-offline-form"><span class="small-text">'+self.helpers.i18n("К сожалению, сейчас у нас нерабочее время.")+"</span><br>"+self.helpers.i18n("Хотите, перезвоним Вам точно в:")+'</div> \t\t\t\t\t<div class="bingc-passive-get-phone-form"> \t\t\t\t\t\t<form id="bingc-passive-get-phone-form" class="bingc-passive-get-phone-form"> \t\t\t\t\t\t\t<div class="bingc-passive-get-phone-form-date-selection"> \t\t\t\t\t\t\t\t '+v+" \t\t\t\t\t\t\t\t"+m+" \t\t\t\t\t\t\t\t"+f+' \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t<div class="bingc-passive-get-phone-form-input-border bingc-offline-form"></div> \t\t\t\t\t\t\t<input type="tel" id="bingc-passive-get-phone-form-input" class="bingc-passive-get-phone-form-input" placeholder="'+self.helpers.i18n("Ваш номер телефона")+'" value="'+bgcConfig.externalNumberInputValue+'" autocomplete="off" onfocus="this.value = this.value;"><a href="javascript:void(0);" id="bingc-passive-phone-form-button" class="bingc-passive-phone-form-button">'+self.helpers.i18n("Жду звонка")+'</a> \t\t\t\t\t\t\t<input type="hidden" id="bingc-passive-get-phone-form-description" class="bingc-passive-get-phone-form-description" value="'+(t||"")+'"> \t\t\t\t\t\t</form> \t\t\t\t\t</div> \t\t\t\t\t<div id="bingc-phone-sample" class="bingc-phone-sample"><span>'+self.helpers.i18n("Например:")+" "+bgcConfig.externalNumberExample+"</span></div> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  "
var y
d.getElementById("bingc-passive-date-selection-select-day").addEventListener("mouseenter",function(){clearTimeout(y),this.classList.add("bingc-passive-date-selection-select-day-hover")}),d.getElementById("bingc-passive-date-selection-select-day").addEventListener("mouseleave",function(){clearTimeout(y)
var e=this
y=setTimeout(function(){e.classList.remove("bingc-passive-date-selection-select-day-hover")},100)})
var B
d.getElementById("bingc-passive-date-selection-select-hour").addEventListener("mouseenter",function(){clearTimeout(B),this.classList.add("bingc-passive-date-selection-select-hour-hover")}),d.getElementById("bingc-passive-date-selection-select-hour").addEventListener("mouseleave",function(){clearTimeout(B)
var e=this
B=setTimeout(function(){e.classList.remove("bingc-passive-date-selection-select-hour-hover")},100)})
var x
d.getElementById("bingc-passive-date-selection-select-minutes").addEventListener("mouseenter",function(){clearTimeout(x),this.classList.add("bingc-passive-date-selection-select-minutes-hover")}),d.getElementById("bingc-passive-date-selection-select-minutes").addEventListener("mouseleave",function(){clearTimeout(x)
var e=this
x=setTimeout(function(){e.classList.remove("bingc-passive-date-selection-select-minutes-hover")},100)})
for(var T=d.getElementById("bingc-passive-date-selection-select-day").getElementsByTagName("li"),o=0;o<T.length;o++)T[o].addEventListener("click",function(e){var t=this.value
d.getElementById("bingc-passive-date-selection-selected-day-index").value=t,d.getElementById("bingc-passive-date-selection-selected-day").textContent=this.textContent,d.getElementById("bingc-passive-date-selection-select-day").classList.remove("bingc-passive-date-selection-select-day-hover"),d.getElementById("bingc-passive-date-selection-selected-hour").textContent=self.workingDays[t].workingHoursOrderedList[0]
var n=d.getElementById("bingc-passive-date-selection-select-hour-list-of-hours-container"),i=Object.keys(self.workingDays[t].workingHours).length
if(i){n.classList.remove("two-columns"),n.classList.remove("three-columns"),i>=10&&i<=18?n.classList.add("two-columns"):i>=19&&n.classList.add("three-columns")
for(var s='<ul class="bingc-passive-date-selection-select-hour-list-of-hours '+(i<10?"only-one-column":"")+'">',o=0;o<self.workingDays[t].workingHoursOrderedList.length;o++)9===o?s+='</ul><ul class="bingc-passive-date-selection-select-hour-list-of-hours second-column">':18===o&&(s+='</ul><ul class="bingc-passive-date-selection-select-hour-list-of-hours third-column">'),s+="<li>"+self.workingDays[t].workingHoursOrderedList[o]+"</li>"
s+="</ul>",n.innerHTML=s
var a=self.workingDays[t].workingHours[self.workingDays[t].workingHoursOrderedList[0]]
d.getElementById("bingc-passive-date-selection-selected-minutes").textContent=a[0]
var l='<ul class="bingc-passive-date-selection-select-minutes-list-of-minutes">'
if(a)for(var o=0;o<a.length;o++)l+="<li>"+a[o]+"</li>"
l+="</ul>",d.getElementById("bingc-passive-date-selection-select-minutes-list-of-minutes-container").innerHTML=l
for(var c=d.getElementById("bingc-passive-date-selection-select-minutes").getElementsByTagName("li"),o=0;o<c.length;o++)c[o].addEventListener("click",function(e){d.getElementById("bingc-passive-date-selection-selected-minutes").textContent=this.textContent,d.getElementById("bingc-passive-date-selection-select-minutes").classList.remove("bingc-passive-date-selection-select-minutes-hover")})
self.helpers.passiveFormOfflineDynamicBindings()}})
self.helpers.passiveFormOfflineDynamicBindings(),d.getElementById("bingc-passive-phone-form-button").addEventListener("click",function(e){var t=d.getElementById("bingc-passive-get-phone-form-input").value
if(t=t.toString().replace(/\D/g,""),self.helpers.isCorrectExternalNumber(t)){d.getElementById("bingc-passive-get-phone-form-input").classList.remove("warning")
var n,i
try{n=w.BinotelInformationAboutTheVisitor.getVisitorData(),i=w.BinotelInformationAboutTheVisitor.getGoogleAnalyticsData()}catch(e){console.error(e)}sendXHR({type:"POST",url:bgcConfig.backendHost+"/getcall/call/",data:{widgetID:bgcConfig.widgetId,externalNumber:t,scheduledCall:1,addingDays:self.workingDays[d.getElementById("bingc-passive-date-selection-selected-day-index").value].addingDays,scheduledAtHour:parseInt(d.getElementById("bingc-passive-date-selection-selected-hour").textContent,10),scheduledAtMinutes:parseInt(d.getElementById("bingc-passive-date-selection-selected-minutes").textContent,10),sessionId:bgcConfig.sessionId,visitorData:n,description:d.getElementById("bingc-passive-get-phone-form-description").value,googleAnalyticsData:i},dataType:"json"},function(e){e&&"success"===e.status?(self.helpers.sendEventToGa("Call requested","gc-"+e.GetCallID),self.activityData.callWasMade=1,d.getElementById("bingc-passive-content").innerHTML=' \t\t\t\t\t\t\t\t\t<div class="bingc-we-will-call-you-later">'+self.helpers.i18n("Заказ звонка принят.")+'<br><span class="small-text">'+self.helpers.i18n("В указанное время мы с Вами свяжемся!")+"</span></div> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  "):d.getElementById("bingc-passive-content").innerHTML=' \t\t\t\t\t\t\t\t\t<div class="bingc-something-went-wrong">'+self.helpers.i18n("К сожалению, что-то пошло не так.<br>Пожалуйста, обновите страницу.")+"</div> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  "},function(e,t){console.log(t,e),d.getElementById("bingc-passive-content").innerHTML=' \t\t\t\t\t\t\t\t<div class="bingc-something-went-wrong">'+self.helpers.i18n("К сожалению, что-то пошло не так.<br>Пожалуйста, обновите страницу.")+"</div> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  "})}else d.getElementById("bingc-passive-get-phone-form-input").classList.add("warning"),d.getElementById("bingc-passive-get-phone-form-input").focus()})}self.helpers.addBlurToWholePage(),d.getElementById("bingc-passive").classList.remove("bingc-passive-closed"),d.getElementById("bingc-phone-button").classList.add("bingc-hide"),d.getElementById("bingc-passive-get-phone-form-input").focus(),d.getElementById("bingc-passive-get-phone-form").addEventListener("submit",function(e){e.preventDefault(),d.getElementById("bingc-passive-phone-form-button").click()})},self.helpers.passiveFormOfflineDynamicBindings=function(){for(var e=d.getElementById("bingc-passive-date-selection-selected-day-index").value,t=d.getElementById("bingc-passive-date-selection-select-hour").getElementsByTagName("li"),n=0;n<t.length;n++)t[n].addEventListener("click",function(t){if(d.getElementById("bingc-passive-date-selection-selected-hour").textContent=this.textContent,d.getElementById("bingc-passive-date-selection-select-hour").classList.remove("bingc-passive-date-selection-select-hour-hover"),self.workingDays[e].workingHours[this.textContent]){var n=self.workingDays[e].workingHours[this.textContent]
d.getElementById("bingc-passive-date-selection-selected-minutes").textContent=n[0]
var i='<ul class="bingc-passive-date-selection-select-minutes-list-of-minutes">'
if(n)for(var s=0;s<n.length;s++)i+="<li>"+n[s]+"</li>"
i+="</ul>",d.getElementById("bingc-passive-date-selection-select-minutes-list-of-minutes-container").innerHTML=i
for(var o=d.getElementById("bingc-passive-date-selection-select-minutes").getElementsByTagName("li"),s=0;s<o.length;s++)o[s].addEventListener("click",function(e){d.getElementById("bingc-passive-date-selection-selected-minutes").textContent=this.textContent,d.getElementById("bingc-passive-date-selection-select-minutes").classList.remove("bingc-passive-date-selection-select-minutes-hover")})}})
for(var t=d.getElementById("bingc-passive-date-selection-select-minutes").getElementsByTagName("li"),n=0;n<t.length;n++)t[n].addEventListener("click",function(e){d.getElementById("bingc-passive-date-selection-selected-minutes").textContent=this.textContent,d.getElementById("bingc-passive-date-selection-select-minutes").classList.remove("bingc-passive-date-selection-select-minutes-hover")})},self.helpers.activeFormOfflineDynamicBindings=function(){for(var e=d.getElementById("bingc-active-date-selection-selected-day-index").value,t=d.getElementById("bingc-active-date-selection-select-hour").getElementsByTagName("li"),n=0;n<t.length;n++)t[n].addEventListener("click",function(t){if(d.getElementById("bingc-active-date-selection-selected-hour").textContent=this.textContent,d.getElementById("bingc-active-date-selection-select-hour").classList.remove("bingc-active-date-selection-select-hour-hover"),self.workingDays[e].workingHours[this.textContent]){var n=self.workingDays[e].workingHours[this.textContent]
d.getElementById("bingc-active-date-selection-selected-minutes").textContent=n[0]
var i='<ul class="bingc-active-date-selection-select-minutes-list-of-minutes">'
if(n)for(var s=0;s<n.length;s++)i+="<li>"+n[s]+"</li>"
i+="</ul>",d.getElementById("bingc-active-date-selection-select-minutes-list-of-minutes-container").innerHTML=i
for(var o=d.getElementById("bingc-active-date-selection-select-minutes").getElementsByTagName("li"),s=0;s<o.length;s++)o[s].addEventListener("click",function(e){d.getElementById("bingc-active-date-selection-selected-minutes").textContent=this.textContent,d.getElementById("bingc-active-date-selection-select-minutes").classList.remove("bingc-active-date-selection-select-minutes-hover")})}})
for(var t=d.getElementById("bingc-active-date-selection-select-minutes").getElementsByTagName("li"),n=0;n<t.length;n++)t[n].addEventListener("click",function(e){d.getElementById("bingc-active-date-selection-selected-minutes").textContent=this.textContent,d.getElementById("bingc-active-date-selection-select-minutes").classList.remove("bingc-active-date-selection-select-minutes-hover")})},self.helpers.closePassiveForm=function(){clearInterval(self.countdownTimerIntervalLink),self.helpers.deleteBlurFromWholePage(),d.getElementById("bingc-passive").classList.add("bingc-passive-closed"),d.getElementById("bingc-phone-button").classList.remove("bingc-hide")},self.helpers.isOpenedPassiveForm=function(){var e=d.getElementById("bingc-passive")
return!(!e||e.classList.contains("bingc-passive-closed")!==!1)},self.helpers.openActiveForm=function(){var e=w.innerWidth||d.documentElement.clientWidth||d.body.clientWidth
if(e<=979)return!1
var t={1:self.helpers.i18n("в понедельник"),2:self.helpers.i18n("во вторник"),3:self.helpers.i18n("в среду"),4:self.helpers.i18n("в четверг"),5:self.helpers.i18n("в пятницу"),6:self.helpers.i18n("в субботу"),0:self.helpers.i18n("в воскресенье")},n=self.helpers.getModeOfWorkingHours()
if("alwaysOnline"===n){var i=' \t\t\t\t\t<div class="bingc-we-will-call-you">'+sprintf(self.helpers.i18n("Хотите, перезвоним Вам<br><span>за %s секунд?</span>"),bgcConfig.countdownTimerForCall)+'</div> \t\t\t\t\t<div class="bingc-active-get-phone-form"> \t\t\t\t\t\t<form id="bingc-active-get-phone-form" class="bingc-active-get-phone-form"> \t\t\t\t\t\t\t<div class="bingc-active-get-phone-form-input-border"></div> \t\t\t\t\t\t\t<input type="tel" id="bingc-active-get-phone-form-input" class="bingc-active-get-phone-form-input" placeholder="'+self.helpers.i18n("Ваш номер телефона")+'" value="'+bgcConfig.externalNumberInputValue+'" autocomplete="off" onfocus="this.value = this.value;"><a href="javascript:void(0);" id="bingc-active-phone-form-button" class="bingc-active-phone-form-button">'+self.helpers.i18n("Перезвоните")+'</a><span class="bingc-sample-countdown-timer"><span>00:</span>'+(bgcConfig.countdownTimerForCall-1)+'<span>:99</span></span> \t\t\t\t\t\t</form> \t\t\t\t\t</div> \t\t\t\t\t<div id="bingc-phone-sample" class="bingc-phone-sample"><span>'+self.helpers.i18n("Например:")+" "+bgcConfig.externalNumberExample+"</span></div> \t\t\t\t\t\t\t\t\t\t\t "
1===bgcConfig.statisticsDisplay&&(i+=' \t\t\t\t\t<div class="bingc-statistics">'+self.helpers.i18n("Свободных операторов на линии:")+" "+bgcConfig.freeEmployees+" &nbsp; &nbsp;&nbsp; "+self.helpers.i18n("Заказов звонков сегодня:")+" "+bgcConfig.callsProcessedToday+"</div> \t\t\t\t\t\t\t\t\t\t\t  "),d.getElementById("bingc-active-content").innerHTML=i,d.getElementById("bingc-active-phone-form-button").addEventListener("click",function(e){var t=d.getElementById("bingc-active-get-phone-form-input").value
if(t=t.toString().replace(/\D/g,""),self.helpers.isCorrectExternalNumber(t)){d.getElementById("bingc-active-get-phone-form-input").classList.remove("warning")
var n,i
try{n=w.BinotelInformationAboutTheVisitor.getVisitorData(),i=w.BinotelInformationAboutTheVisitor.getGoogleAnalyticsData()}catch(e){console.error(e)}sendXHR({type:"POST",url:bgcConfig.backendHost+"/getcall/call/",data:{widgetID:bgcConfig.widgetId,externalNumber:t,sessionId:bgcConfig.sessionId,visitorData:n,googleAnalyticsData:i},dataType:"json"},function(e){e&&"success"===e.status?(self.helpers.sendEventToGa("Call requested","gc-"+e.GetCallID),self.activityData.callWasMade=1,d.getElementById("bingc-active-content").innerHTML=' \t\t\t\t\t\t\t\t\t<div class="bingc-we-already-call-you">'+self.helpers.i18n("Заказ звонка принят. Мы Вам уже звоним!")+'</div> \t\t\t\t\t\t\t\t\t<div id="bingc-active-countdown-timer" class="bingc-active-countdown-timer">00:'+(bgcConfig.countdownTimerForCall-1)+":99</div> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  ",setTimeout(function(){var e,t,n,i=100*(bgcConfig.countdownTimerForCall-1)+99
self.countdownTimerIntervalLink=setInterval(function(){i-=1,e=i.toString(),t=Math.floor(i/100),t<10&&(t="0"+t),n=e.slice(-2),n.length<2&&(n="0"+n),d.getElementById("bingc-active-countdown-timer").innerHTML="00:"+t+":"+n,0==i&&clearInterval(self.countdownTimerIntervalLink)},10)},100)):d.getElementById("bingc-active-content").innerHTML=' \t\t\t\t\t\t\t\t\t<div class="bingc-something-went-wrong">'+self.helpers.i18n("К сожалению, что-то пошло не так.<br>Пожалуйста, обновите страницу.")+"</div> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  "},function(e,t){console.log(t,e),d.getElementById("bingc-active-content").innerHTML=' \t\t\t\t\t\t\t\t<div class="bingc-something-went-wrong">'+self.helpers.i18n("К сожалению, что-то пошло не так.<br>Пожалуйста, обновите страницу.")+"</div> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  "})}else d.getElementById("bingc-active-get-phone-form-input").classList.add("warning"),d.getElementById("bingc-active-get-phone-form-input").focus()})}else if("alwaysOffline"===n){self.workingDays=[]
for(var s=0;s<=9;s++){for(var o={},a=0;a<=23;a++)for(var l=0;l<=45;l+=15){var c=new Date(1e3*(Math.floor(Date.now()/1e3)+bgcConfig.widgetTimezoneOffset+bgcConfig.clientSideTimezoneOffset+bgcConfig.clientSideTimeOffset)),r=new Date(1e3*(Math.floor(Date.now()/1e3)+bgcConfig.widgetTimezoneOffset+bgcConfig.clientSideTimezoneOffset+bgcConfig.clientSideTimeOffset))
if(r.setHours(a),r.setMinutes(l),r.setSeconds(0),r.setDate(c.getDate()+s),!(0===s&&c.getHours()>=a)&&BinotelHelperPbx.checkingTimeOnTimeline(bgcConfig.rulesOfWorkingHours,Math.floor(r.getTime()/1e3))===!0){if("undefined"==typeof o.dayName){var g
g=0===s?self.helpers.i18n("сегодня"):1===s?self.helpers.i18n("завтра"):t[r.getDay()],o={dayName:g,workingHoursOrderedList:[],workingHours:{},addingDays:s}}var p=r.getHours().toString().length<=1?"0"+r.getHours():r.getHours().toString()
"undefined"==typeof o.workingHours[p]&&(o.workingHours[p]=[],o.workingHoursOrderedList.push(p)),o.workingHours[p].push(0==r.getMinutes()?"00":r.getMinutes())}}if("undefined"!=typeof o.dayName&&(self.workingDays.push(o),3===self.workingDays.length))break}var u="",f="",v=""
if(self.workingDays.length){u='<div id="bingc-active-date-selection-select-day" class="bingc-active-date-selection-select-day"><svg class="bingc-active-date-selection-arrows" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 10 14" enable-background="new 0 0 10 14" xml:space="preserve"><path fill-rule="evenodd" clip-rule="evenodd" d="M0,4.995L4.995,0L9.99,4.995"/></svg><span id="bingc-active-date-selection-selected-day" class="bingc-active-date-selection-selected-day">'+self.workingDays[0].dayName+'</span><input type="hidden" id="bingc-active-date-selection-selected-day-index" value="0"><div id="bingc-active-date-selection-select-day-list-of-days-container" class="bingc-active-date-selection-select-day-list-of-days-container"><ul id="bingc-active-date-selection-select-day-list-of-days" class="bingc-active-date-selection-select-day-list-of-days">'
for(var s=0;s<self.workingDays.length;s++)u+='<li value="'+s+'">'+self.workingDays[s].dayName+"</li>"
u+="</ul></div></div>"
var m=Object.keys(self.workingDays[0].workingHours).length
if(f='<div id="bingc-active-date-selection-select-hour" class="bingc-active-date-selection-select-hour"><span id="bingc-active-date-selection-selected-hour" class="bingc-active-date-selection-selected-hour">'+self.workingDays[0].workingHoursOrderedList[0]+'</span><svg class="bingc-active-date-selection-arrows" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 10 14" enable-background="new 0 0 10 14" xml:space="preserve"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.99,8.905L4.995,13.9L0,8.905"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0,4.995L4.995,0L9.99,4.995"/></svg><div id="bingc-active-date-selection-select-hour-list-of-hours-container" class="bingc-active-date-selection-select-hour-list-of-hours-container '+(m>=10&&m<=18?"two-columns":m>=19?"three-columns":"")+'"><ul class="bingc-active-date-selection-select-hour-list-of-hours '+(m<10?"only-one-column":"")+'">',m)for(var s=0;s<self.workingDays[0].workingHoursOrderedList.length;s++)9===s?f+='</ul><ul class="bingc-active-date-selection-select-hour-list-of-hours second-column">':18===s&&(f+='</ul><ul class="bingc-active-date-selection-select-hour-list-of-hours third-column">'),f+="<li>"+self.workingDays[0].workingHoursOrderedList[s]+"</li>"
if(f+="</ul></div></div>",m&&self.workingDays[0].workingHours[self.workingDays[0].workingHoursOrderedList[0]]){var b=self.workingDays[0].workingHours[self.workingDays[0].workingHoursOrderedList[0]]
v='<div id="bingc-active-date-selection-select-minutes" class="bingc-active-date-selection-select-minutes"><span id="bingc-active-date-selection-selected-minutes" class="bingc-active-date-selection-selected-minutes">'+b[0]+'</span><svg class="bingc-active-date-selection-arrows" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 10 14" enable-background="new 0 0 10 14" xml:space="preserve"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.99,8.905L4.995,13.9L0,8.905"/><path fill-rule="evenodd" clip-rule="evenodd" d="M0,4.995L4.995,0L9.99,4.995"/></svg><div id="bingc-active-date-selection-select-minutes-list-of-minutes-container" class="bingc-active-date-selection-select-minutes-list-of-minutes-container"><ul class="bingc-active-date-selection-select-minutes-list-of-minutes">'
for(var s=0;s<b.length;s++)v+="<li>"+b[s]+"</li>"
v+="</ul></div></div>"}}d.getElementById("bingc-active-content").innerHTML=' \t\t\t\t\t<div class="bingc-we-will-call-you bingc-offline-form">'+sprintf(self.helpers.i18n("Хотите, перезвоним Вам<br>%s точно в:"),u)+'</div> \t\t\t\t\t<div class="bingc-active-get-phone-form bingc-offline-form"> \t\t\t\t\t\t<form id="bingc-active-get-phone-form" class="bingc-active-get-phone-form"> \t\t\t\t\t\t\t<div class="bingc-active-get-phone-form-date-selection"> \t\t\t\t\t\t\t\t '+f+" \t\t\t\t\t\t\t\t"+v+' \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t<div class="bingc-active-get-phone-form-input-border bingc-offline-form"></div> \t\t\t\t\t\t\t<input type="tel" id="bingc-active-get-phone-form-input" class="bingc-active-get-phone-form-input" placeholder="'+self.helpers.i18n("Ваш номер телефона")+'" value="'+bgcConfig.externalNumberInputValue+'" autocomplete="off" onfocus="this.value = this.value;"><a href="javascript:void(0);" id="bingc-active-phone-form-button" class="bingc-active-phone-form-button">'+self.helpers.i18n("Жду звонка")+'</a> \t\t\t\t\t\t</form> \t\t\t\t\t</div> \t\t\t\t\t<div id="bingc-phone-sample" class="bingc-phone-sample"><span>'+self.helpers.i18n("Например:")+" "+bgcConfig.externalNumberExample+"</span></div> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  "
var h
d.getElementById("bingc-active-date-selection-select-day").addEventListener("mouseenter",function(){clearTimeout(h),this.classList.add("bingc-active-date-selection-select-day-hover")}),d.getElementById("bingc-active-date-selection-select-day").addEventListener("mouseleave",function(){clearTimeout(h)
var e=this
h=setTimeout(function(){e.classList.remove("bingc-active-date-selection-select-day-hover")},100)})
var y
d.getElementById("bingc-active-date-selection-select-hour").addEventListener("mouseenter",function(){clearTimeout(y),this.classList.add("bingc-active-date-selection-select-hour-hover")}),d.getElementById("bingc-active-date-selection-select-hour").addEventListener("mouseleave",function(){clearTimeout(y)
var e=this
y=setTimeout(function(){e.classList.remove("bingc-active-date-selection-select-hour-hover")},100)})
var B
d.getElementById("bingc-active-date-selection-select-minutes").addEventListener("mouseenter",function(){clearTimeout(B),this.classList.add("bingc-active-date-selection-select-minutes-hover")}),d.getElementById("bingc-active-date-selection-select-minutes").addEventListener("mouseleave",function(){clearTimeout(B)
var e=this
B=setTimeout(function(){e.classList.remove("bingc-active-date-selection-select-minutes-hover")},100)})
for(var x=d.getElementById("bingc-active-date-selection-select-day").getElementsByTagName("li"),s=0;s<x.length;s++)x[s].addEventListener("click",function(e){var t=this.value
d.getElementById("bingc-active-date-selection-selected-day-index").value=t,d.getElementById("bingc-active-date-selection-selected-day").textContent=this.textContent,d.getElementById("bingc-active-date-selection-select-day").classList.remove("bingc-active-date-selection-select-day-hover"),d.getElementById("bingc-active-date-selection-selected-hour").textContent=self.workingDays[t].workingHoursOrderedList[0]
var n=d.getElementById("bingc-active-date-selection-select-hour-list-of-hours-container"),i=Object.keys(self.workingDays[t].workingHours).length
if(i){n.classList.remove("two-columns"),n.classList.remove("three-columns"),i>=11&&i<=20?n.classList.add("two-columns"):i>=21&&n.classList.add("three-columns")
for(var s='<ul class="bingc-active-date-selection-select-hour-list-of-hours '+(i<11?"only-one-column":"")+'">',o=0;o<self.workingDays[t].workingHoursOrderedList.length;o++)10===o?s+='</ul><ul class="bingc-active-date-selection-select-hour-list-of-hours second-column">':20===o&&(s+='</ul><ul class="bingc-active-date-selection-select-hour-list-of-hours third-column">'),s+="<li>"+self.workingDays[t].workingHoursOrderedList[o]+"</li>"
s+="</ul>",n.innerHTML=s
var a=self.workingDays[t].workingHours[self.workingDays[t].workingHoursOrderedList[0]]
d.getElementById("bingc-active-date-selection-selected-minutes").textContent=a[0]
var l='<ul class="bingc-active-date-selection-select-minutes-list-of-minutes">'
if(a)for(var o=0;o<a.length;o++)l+="<li>"+a[o]+"</li>"
l+="</ul>",d.getElementById("bingc-active-date-selection-select-minutes-list-of-minutes-container").innerHTML=l
for(var c=d.getElementById("bingc-active-date-selection-select-minutes").getElementsByTagName("li"),o=0;o<c.length;o++)c[o].addEventListener("click",function(e){d.getElementById("bingc-active-date-selection-selected-minutes").textContent=this.textContent,d.getElementById("bingc-active-date-selection-select-minutes").classList.remove("bingc-active-date-selection-select-minutes-hover")})
self.helpers.activeFormOfflineDynamicBindings()}})
self.helpers.activeFormOfflineDynamicBindings(),d.getElementById("bingc-active-phone-form-button").addEventListener("click",function(e){var t=d.getElementById("bingc-active-get-phone-form-input").value
if(t=t.toString().replace(/\D/g,""),self.helpers.isCorrectExternalNumber(t)){d.getElementById("bingc-active-get-phone-form-input").classList.remove("warning")
var n,i
try{n=w.BinotelInformationAboutTheVisitor.getVisitorData(),i=w.BinotelInformationAboutTheVisitor.getGoogleAnalyticsData()}catch(e){console.error(e)}sendXHR({type:"POST",url:bgcConfig.backendHost+"/getcall/call/",data:{widgetID:bgcConfig.widgetId,externalNumber:t,scheduledCall:1,addingDays:self.workingDays[d.getElementById("bingc-active-date-selection-selected-day-index").value].addingDays,scheduledAtHour:parseInt(d.getElementById("bingc-active-date-selection-selected-hour").textContent,10),scheduledAtMinutes:parseInt(d.getElementById("bingc-active-date-selection-selected-minutes").textContent,10),sessionId:bgcConfig.sessionId,visitorData:n,googleAnalyticsData:i},dataType:"json"},function(e){e&&"success"===e.status?(self.helpers.sendEventToGa("Call requested","gc-"+e.GetCallID),self.activityData.callWasMade=1,d.getElementById("bingc-active-content").innerHTML=' \t\t\t\t\t\t\t\t\t<div class="bingc-we-will-call-you-later">'+self.helpers.i18n("Заказ звонка принят.")+'<br><span class="small-text">'+self.helpers.i18n("В указанное время мы с Вами свяжемся!")+"</span></div> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  "):d.getElementById("bingc-active-content").innerHTML=' \t\t\t\t\t\t\t\t\t<div class="bingc-something-went-wrong">'+self.helpers.i18n("К сожалению, что-то пошло не так.<br>Пожалуйста, обновите страницу.")+"</div> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  "},function(e,t){console.log(t,e),d.getElementById("bingc-active-content").innerHTML=' \t\t\t\t\t\t\t\t<div class="bingc-something-went-wrong">'+self.helpers.i18n("К сожалению, что-то пошло не так.<br>Пожалуйста, обновите страницу.")+"</div> \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  "})}else d.getElementById("bingc-active-get-phone-form-input").classList.add("warning"),d.getElementById("bingc-active-get-phone-form-input").focus()})}d.getElementById("bingc-active").classList.remove("bingc-active-closed"),d.getElementById("bingc-phone-button").classList.add("bingc-hide"),d.getElementById("bingc-active-get-phone-form-input").focus(),d.getElementById("bingc-active-get-phone-form").addEventListener("submit",function(e){e.preventDefault(),d.getElementById("bingc-active-phone-form-button").click()})},self.helpers.closeActiveForm=function(){clearInterval(self.countdownTimerIntervalLink),self.helpers.deleteBlurFromWholePage(),d.getElementById("bingc-active").classList.add("bingc-active-closed"),d.getElementById("bingc-phone-button").classList.remove("bingc-hide")},self.helpers.isOpenedActiveForm=function(){var e=d.getElementById("bingc-active")
return!(!e||e.classList.contains("bingc-active-closed")!==!1)},self.helpers.addBlurToWholePage=function(){for(var e=d.getElementsByTagName("body")[0].childNodes,t=0;t<e.length;t++)if(1==e[t].nodeType&&"SCRIPT"!==e[t].nodeName&&"STYLE"!==e[t].nodeName){if("bingc-passive"===e[t].id||"bingc-phone-button"===e[t].id||"bingc-active"===e[t].id)continue
e[t].classList.add("bingc-blur-whole-page")}},self.helpers.deleteBlurFromWholePage=function(){for(var e=d.getElementsByTagName("body")[0].childNodes,t=0;t<e.length;t++)1==e[t].nodeType&&"SCRIPT"!==e[t].nodeName&&"STYLE"!==e[t].nodeName&&e[t].classList.remove("bingc-blur-whole-page")},self.helpers.setClientSideTimeOffset=function(e){sendXHR({type:"GET",url:bgcConfig.backendHost+"/getcall/getTimestamp/",dataType:"json"},function(t){t&&t.timestamp?bgcConfig.clientSideTimeOffset=t.timestamp-Math.floor(Date.now()/1e3):e!==!0&&setTimeout(function(){self.helpers.setClientSideTimeOffset(!0)},12e4)},function(t,n){console.log(n,t),e!==!0&&setTimeout(function(){self.helpers.setClientSideTimeOffset(!0)},12e4)})},self.helpers.getModeOfWorkingHours=function(){var e=bgcConfig.modeOfWorkingHours
return"rangeOfWorkingHours"===e&&(e="alwaysOffline",BinotelHelperPbx.checkingTimeOnTimeline(bgcConfig.rulesOfWorkingHours,Math.floor(Date.now()/1e3)+bgcConfig.widgetTimezoneOffset+bgcConfig.clientSideTimezoneOffset+bgcConfig.clientSideTimeOffset)===!0&&(e="alwaysOnline")),e},self.helpers.rotatePhoneButton=function(){var e,t=d.getElementById("bingc-phone-button-icon-text"),n=d.getElementById("bingc-phone-button-icon-icon")
t.classList.contains("bingc-phone-button-icon-show")?(t.classList.remove("bingc-phone-button-icon-show"),n.classList.add("bingc-phone-button-icon-show"),e=8):(n.classList.remove("bingc-phone-button-icon-show"),t.classList.add("bingc-phone-button-icon-show"),e=4),clearTimeout(self.timers.rotatePhoneButtonTimer),self.timers.rotatePhoneButtonTimer=setTimeout(self.helpers.rotatePhoneButton,1e3*e)},self.helpers.showPhoneButtonTooltip=function(){var e=d.getElementById("bingc-phone-button-tooltip")
e&&(e.classList.add("bingc-phone-button-tooltip-show-first"),setTimeout(function(){e.classList.add("bingc-phone-button-tooltip-show-second")},50))},self.helpers.hidePhoneButtonTooltip=function(){var e=d.getElementById("bingc-phone-button-tooltip")
e&&(e.classList.remove("bingc-phone-button-tooltip-show-second"),setTimeout(function(){e.classList.contains("bingc-phone-button-tooltip-show-second")===!1&&e.classList.remove("bingc-phone-button-tooltip-show-first")},1e3))},self.helpers.isCorrectExternalNumber=function(e){if(""===e||e===bgcConfig.externalNumberExample.toString().replace(/\D/g,"")||e.length<bgcConfig.externalNumberMinLength||e.length>bgcConfig.externalNumberMaxLength)return!1
for(var t={},n=0,i=0;i<10;i++)t[e[i]]||(t[e[i]]=e[i],n++)
return!(n<=2)},self.helpers.i18n=function(e){var t=bgcConfig.language,n=""
return bgcConfig.i18nDictionary[t]&&bgcConfig.i18nDictionary[t][e]?n=bgcConfig.i18nDictionary[t][e]:("ru"!==bgcConfig.language&&console.log("[%s] %s",bgcConfig.language,e),n=e),bgcConfig.customI18nDictionary&&bgcConfig.customI18nDictionary[n]&&(n=bgcConfig.customI18nDictionary[n]),n},self.helpers.sendEventToGa=function(eventAction,eventLabel,eventValue,nonInteraction){eventLabel=eventLabel||void 0,eventValue=eventValue?parseInt(eventValue):void 0,nonInteraction=nonInteraction===!0,self.gaObject=eval(bgcConfig.gaObjectName)
var gaTrackingId
try{gaTrackingId=w.BinotelInformationAboutTheVisitorSettings.gaTrackingId}catch(e){console.error(e)}if("object"!=typeof _gaq||gaTrackingId)if("function"==typeof self.gaObject){bgcConfig.debugMode&&console.log("[%s] %s",Date(),"Send event to universal GA.")
try{var googleAnalyticsData
try{googleAnalyticsData=w.BinotelInformationAboutTheVisitor.getGoogleAnalyticsData()}catch(e){console.error(e)}var gaTrackerName=""
googleAnalyticsData&&googleAnalyticsData.name&&(gaTrackerName=googleAnalyticsData.name+"."),self.gaObject(gaTrackerName+"send","event","Binotel GetCall",eventAction,eventLabel,eventValue,{nonInteraction:nonInteraction})}catch(e){bgcConfig.debugMode&&console.log("[%s] %s",Date(),"Error in sendEventToGa.",e)}}else bgcConfig.debugMode&&console.log("[%s] %s",Date(),"Can't find GA.")
else{bgcConfig.debugMode&&console.log("[%s] %s",Date(),"Send event to old GA.")
try{_gaq.push(["_trackEvent","Binotel GetCall",eventAction,eventLabel,eventValue,nonInteraction])}catch(e){bgcConfig.debugMode&&console.log("[%s] %s",Date(),"Error in sendEventToGa.",e)}}},this},BinotelHelperPbx=function(){return{checkingTimeOnTimeline:function(e,t){"undefined"==typeof t&&(t=Math.floor(Date.now()/1e3))
var n=new Date(1e3*t),i=n.getHours(),s=n.getMinutes(),o=n.getDay(),a=n.getDate(),l=n.getMonth()+1
for(var c in e){var r
try{r=e[c].split(",")}catch(e){}if(!("object"!=typeof r||r.length<4)){var d="undefined"!=typeof r[0]?r[0]:null,g="undefined"!=typeof r[1]?r[1]:null,p="undefined"!=typeof r[2]?r[2]:null,u="undefined"!=typeof r[3]?r[3]:null
if(null===d||null===g||null===p||null===u)break
var f,v,m,b
if("*"!==d){var h=d.split("-"),y="object"==typeof h&&2===h.length?h[0].split(":"):["0","0"],w="object"==typeof h&&2===h.length?h[1].split(":"):["0","0"]
f="object"==typeof y&&2===y.length?Math.round(y[0]):"0",v="object"==typeof y&&2===y.length?Math.round(y[1]):"0",m="object"==typeof w&&2===w.length?Math.round(w[0]):"0",b="object"==typeof w&&2===w.length?Math.round(w[1]):"0"}var B={}
if("*"!==g){var x={mon:1,tue:2,wed:3,thu:4,fri:5,sat:6,sun:7}
if(g.indexOf("-")===-1)"undefined"!=typeof x[g]&&(B[x[g]]=x[g])
else for(var T=g.split("-"),k="object"==typeof T&&2===T.length&&"undefined"!=typeof x[T[0]]?x[T[0]]:0,I="object"==typeof T&&2===T.length&&"undefined"!=typeof x[T[1]]?x[T[1]]:0,E=k;E<=I;E++)B[E]=E}if("*"!==p){var C=p.split("-")
startDayOfMonth="object"==typeof C&&2===C.length?C[0]:0,stopDayOfManth="object"==typeof C&&2===C.length?C[1]:0}var D={}
if("*"!==u){var L={jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12}
if(u.indexOf("-")===-1)"undefined"!=typeof L[u]&&(D[L[u]]=L[u])
else for(var O=u.split("-"),H="object"==typeof O&&2===O.length&&"undefined"!=typeof L[O[0]]?L[O[0]]:0,_="object"==typeof O&&2===O.length&&"undefined"!=typeof L[O[1]]?L[O[1]]:0,E=H;E<=_;E++)D[E]=E}if(0===o&&(o=7),("*"===d||(f==i&&v<=s||f<i)&&(m==i&&b>=s||m>i))&&("*"===g||"undefined"!=typeof B[o])&&("*"===p||startDayOfMonth<=a&&stopDayOfManth>=a)&&("*"===u||"undefined"!=typeof D[l]))return!0}}return!1}}}()
Date.now||(Date.now=function(){return(new Date).getTime()}),function(e){var t={},n={},s=n.toString,o=/%20/g,a=/\[\]$/
e.binotelJqMini=t,t.type=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[s.call(e)]||"object":typeof e},t.isFunction=function(e){return"function"===t.type(e)},t.buildParams=function(e,n,s){var o,l,c
if(Array.isArray(n))for(var l in n)c=n[l],a.test(e)?s(e,c):t.buildParams(e+"["+("object"==typeof v?i:"")+"]",c,s)
else if("object"===t.type(n))for(o in n)t.buildParams(e+"["+o+"]",n[o],s)
else s(e,n)},t.param=function(e){var n,i,s
if(serialized=[],add=function(e,n){n=t.isFunction(n)?n():null==n?"":n,serialized[serialized.length]=encodeURIComponent(e)+"="+encodeURIComponent(n)},Array.isArray(e))for(i in e)s=e[i],add(i,s)
else for(n in e)t.buildParams(n,e[n],add)
return serialized.join("&").replace(o,"+")}}(window)}}(document,window,"script")
