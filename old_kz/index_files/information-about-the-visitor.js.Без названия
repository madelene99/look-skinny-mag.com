/* jshint multistr: true */
!function(t){var e=!1
if("function"==typeof define&&define.amd,1,"object"==typeof exports,1,!e){var a=window.biatvCookies,i=window.biatvCookies=t()
i.noConflict=function(){return window.biatvCookies=a,i}}}(function(){function t(){for(var t=0,e={};t<arguments.length;t++){var a=arguments[t]
for(var i in a)e[i]=a[i]}return e}function e(a){function i(e,s,r){var o
if("undefined"!=typeof document){if(arguments.length>1){if(r=t({path:"/"},i.defaults,r),"number"==typeof r.expires){var n=new Date
n.setMilliseconds(n.getMilliseconds()+864e5*r.expires),r.expires=n}r.expires=r.expires?r.expires.toUTCString():""
try{o=JSON.stringify(s),/^[\{\[]/.test(o)&&(s=o)}catch(t){}s=a.write?a.write(s,e):encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape)
var l=""
for(var u in r)r[u]&&(l+="; "+u,r[u]!==!0&&(l+="="+r[u]))
return document.cookie=e+"="+s+l}e||(o={})
for(var f=document.cookie?document.cookie.split("; "):[],g=/(%[0-9A-Z]{2})+/g,c=0;c<f.length;c++){var m=f[c].split("="),D=m.slice(1).join("=")
'"'===D.charAt(0)&&(D=D.slice(1,-1))
try{var v=m[0].replace(g,decodeURIComponent)
if(D=a.read?a.read(D,v):a(D,v)||D.replace(g,decodeURIComponent),this.json)try{D=JSON.parse(D)}catch(t){}if(e===v){o=D
break}e||(o[v]=D)}catch(t){}}return o}}return i.set=i,i.get=function(t){return i.call(i,t)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(e,a){i(e,"",t(a,{expires:-1}))},i.withConverter=e,i}return e(function(){})}),function(d,w,s){if(!w.BinotelInformationAboutTheVisitor){w.BinotelInformationAboutTheVisitor={gaObjectName:"window.ga",gaTrackingId:"",debugMode:0,cookieName:"biatv-cookie",errorMessage:""}
var searchEnginesList=[{name:"google",regexp:/^www.google/,query:"q"},{name:"yandex",regexp:/yandex.(ua|ru|kz|by|com|tr)$/,query:"text"},{name:"go.mail.ru",regexp:/^go.mail.ru$/,query:"q"},{name:"bing",regexp:/^www.bing/,query:"q"},{name:"yahoo",regexp:/^search.yahoo/,query:"p"},{name:"ask",regexp:/ask.com$/,query:"q"},{name:"rambler",regexp:/rambler.ru$/,query:"query"},{name:"ukr.net",regexp:/^search.ukr.net$/,query:"search_query"},{name:"ukr.net",regexp:/^search.ukr.net$/,query:"search_query"},{name:"meta.ua",regexp:/^search.meta.ua$/,query:"q"},{name:"i.ua",regexp:/^search.i.ua$/,query:"q"},{name:"all.by",regexp:/^all.by$/,query:"query"},{name:"search.tut.by",regexp:/^search.tut.by$/,query:"query"}],socialNetworksList=[],biatvConfig=w.BinotelInformationAboutTheVisitor
w.BinotelInformationAboutTheVisitorSettings&&(w.BinotelInformationAboutTheVisitorSettings.gaObjectName&&(biatvConfig.gaObjectName=w.BinotelInformationAboutTheVisitorSettings.gaObjectName),w.BinotelInformationAboutTheVisitorSettings.gaTrackingId&&(biatvConfig.gaTrackingId=w.BinotelInformationAboutTheVisitorSettings.gaTrackingId),w.BinotelInformationAboutTheVisitorSettings.debugMode&&(biatvConfig.debugMode=w.BinotelInformationAboutTheVisitorSettings.debugMode)),biatvConfig.debugMode&&console.log("Binotel information about the visitor in processing.",biatvConfig)
var biatv
setTimeout(function(){biatv=new BinotelInformationAboutTheVisitor,biatv.init(),biatvConfig.getVisitorData=biatv.getVisitorData,biatvConfig.getGoogleAnalyticsData=biatv.getGoogleAnalyticsData,biatvConfig.getGoogleAnalyticsDataViaCallback=biatv.getGoogleAnalyticsDataViaCallback},50)
var BinotelInformationAboutTheVisitor=function(){var self={helpers:{},cookies:w.biatvCookies.noConflict(),gaObject:null,googleAnalytics:{initState:!1,data:{name:"",trackingId:"",clientId:""},listOfCallbacks:[]},timers:{initGoogleAnalyticsData:null}}
return this.init=function(){self.helpers.initVisitorData(),self.helpers.initGoogleAnalyticsData()},this.getVisitorData=function(){return self.helpers.getVisitorData()},this.getGoogleAnalyticsData=function(){return self.helpers.getGoogleAnalyticsData()},this.getGoogleAnalyticsDataViaCallback=function(t){return self.helpers.getGoogleAnalyticsDataViaCallback(t)},self.helpers.initVisitorData=function(){biatvConfig.debugMode&&console.log("[%s] %s",Date(),"Run self.helpers.initVisitorData")
var t=Math.floor(Date.now()/1e3)
self.visitorData=self.cookies.getJSON(biatvConfig.cookieName),self.visitorData||(self.visitorData={firstVisitAt:t,visitsCount:0,campaignCount:0}),self.visitorData.utmData&&(self.visitorData.utmDataCurrent=self.visitorData.utmData,delete self.visitorData.utmData),self.visitorData.sessionTimeFirst&&(self.visitorData.firstVisitAt=self.visitorData.sessionTimeFirst,delete self.visitorData.sessionTimeFirst),self.visitorData.visitsCount||(self.visitorData.visitsCount=1),self.visitorData.currentVisitStartedAt||(self.visitorData.currentVisitStartedAt=t),self.visitorData.currentVisitOpenPages||(self.visitorData.currentVisitOpenPages=0),self.visitorData.sessionTimeCurrent&&(self.visitorData.currentVisitUpdatedAt=self.visitorData.sessionTimeCurrent,delete self.visitorData.sessionTimeCurrent),(!self.visitorData.currentVisitUpdatedAt||t-self.visitorData.currentVisitUpdatedAt>14400)&&(self.visitorData.visitsCount++,self.visitorData.currentVisitStartedAt=t,self.visitorData.currentVisitOpenPages=0),self.visitorData.location=w.location.href,self.visitorData.userAgent=w&&w.navigator&&w.navigator.userAgent?w.navigator.userAgent:"",self.visitorData.language=(w.navigator.languages?w.navigator.languages[0]:w.navigator.language||w.navigator.browserLanguage||w.navigator.userLanguage).toLowerCase(),self.visitorData.encoding=(d.characterSet||d.charset).toLowerCase(),self.visitorData.screenResolution=w.screen.width+"x"+w.screen.height,self.visitorData.currentVisitUpdatedAt=t,self.visitorData.currentVisitOpenPages++
var e=self.helpers.parseQueryString(w.location.search),a=self.helpers.parseReferrer(d.referrer),i=self.helpers.parseQueryString(a.search)
if(e.gclid&&!e.utm_source)self.visitorData.utmDataCurrent={},self.visitorData.utmDataCurrent.utm_source="google",self.visitorData.utmDataCurrent.utm_medium="cpc",self.visitorData.utmDataCurrent.utm_campaign="(not set)",self.visitorData.utmDataCurrent.utm_content="(not set)",self.visitorData.utmDataCurrent.utm_term="(not set)",self.visitorData.utmDataCurrent.beginning_at=t,self.visitorData.campaignTime=t,self.visitorData.campaignCount++
else if(e.utm_source)self.visitorData.utmDataCurrent={},self.visitorData.utmDataCurrent.utm_source=e.utm_source,self.visitorData.utmDataCurrent.utm_medium=e.utm_medium||"(not set)",self.visitorData.utmDataCurrent.utm_campaign=e.utm_campaign||"(not set)",self.visitorData.utmDataCurrent.utm_content=e.utm_content||"(not set)",self.visitorData.utmDataCurrent.utm_term=e.utm_term||"(not set)",self.visitorData.utmDataCurrent.beginning_at=t,self.visitorData.campaignTime=t,self.visitorData.campaignCount++
else if(a.hostname&&a.hostname!==w.location.hostname){self.visitorData.utmDataCurrent=void 0
for(var s=0;s<searchEnginesList.length;s++)if(searchEnginesList[s].regexp.test(a.hostname)){self.visitorData.utmDataCurrent={},self.visitorData.utmDataCurrent.utm_source=searchEnginesList[s].name,self.visitorData.utmDataCurrent.utm_medium="organic",self.visitorData.utmDataCurrent.utm_campaign="(not set)",self.visitorData.utmDataCurrent.utm_content="(not set)",self.visitorData.utmDataCurrent.utm_term="https:"===a.protocol?"(not provided)":i[searchEnginesList[s].query]||"(not set)",self.visitorData.utmDataCurrent.beginning_at=t,self.visitorData.campaignTime=t,self.visitorData.campaignCount++
break}!self.visitorData.utmDataCurrent,self.visitorData.utmDataCurrent||(self.visitorData.utmDataCurrent={},self.visitorData.utmDataCurrent.utm_source=a.hostname,self.visitorData.utmDataCurrent.utm_medium="referral",self.visitorData.utmDataCurrent.utm_campaign="(referral)",self.visitorData.utmDataCurrent.utm_content=a.pathname,self.visitorData.utmDataCurrent.utm_term="(not set)",self.visitorData.utmDataCurrent.beginning_at=t,self.visitorData.campaignTime=t,self.visitorData.campaignCount++)}else self.visitorData.utmDataCurrent||(self.visitorData.utmDataCurrent={},self.visitorData.utmDataCurrent.utm_source="(direct)",self.visitorData.utmDataCurrent.utm_medium="(none)",self.visitorData.utmDataCurrent.utm_campaign="(direct)",self.visitorData.utmDataCurrent.utm_content="(not set)",self.visitorData.utmDataCurrent.utm_term="(not set)",self.visitorData.utmDataCurrent.beginning_at=t,self.visitorData.campaignTime=t,self.visitorData.campaignCount++)
self.visitorData.utmDataFirst||(self.visitorData.utmDataFirst=self.visitorData.utmDataCurrent),"cpc"===self.visitorData.utmDataCurrent.utm_medium&&(self.visitorData.utmDataFirstPaid||(self.visitorData.utmDataFirstPaid=self.visitorData.utmDataCurrent),self.visitorData.utmDataLastPaid=self.visitorData.utmDataCurrent),self.visitorData.geoipData={country:"Ukraine",region:"Kirovohrads'ka Oblast'",city:"Kirovograd",org:"Volia"},self.cookies.set(biatvConfig.cookieName,self.visitorData,{expires:730,domain:biatvConfig.cookieDomain||""})},self.helpers.initGoogleAnalyticsData=function(attempts){return clearTimeout(self.timers.initGoogleAnalyticsData),attempts=attempts||1,biatvConfig.debugMode&&console.log("[%s] %s [attempt: %s]",Date(),"Run self.helpers.initGoogleAnalyticsData",attempts),attempts>=201?(biatvConfig.debugMode&&(biatvConfig.errorMessage="Can't find GA",console.log("[%s] %s",Date(),biatvConfig.errorMessage)),self.googleAnalytics.initState="failed",self.helpers.sendGoogleAnalyticsDataViaCallback(),!1):(self.gaObject=eval(biatvConfig.gaObjectName),void("undefined"==typeof self.gaObject||"function"!=typeof self.gaObject||"function"!=typeof self.gaObject.getAll?self.timers.initGoogleAnalyticsData=setTimeout(function(){self.helpers.initGoogleAnalyticsData(++attempts)},attempts<=100?200:1e3):self.gaObject(function(){var t=self.gaObject.getAll()
if(t.length){var e=0,a=!1
if(biatvConfig.gaTrackingId)for(var i=0;i<t.length;i++)if(biatvConfig.gaTrackingId===t[i].get("trackingId")){e=i,a=!0
break}!a&&biatvConfig.gaTrackingId&&attempts<201?self.timers.initGoogleAnalyticsData=setTimeout(function(){self.helpers.initGoogleAnalyticsData(++attempts)},attempts<=100?200:1e3):(self.googleAnalytics.data.name=t[e].get("name"),self.googleAnalytics.data.trackingId=t[e].get("trackingId"),self.googleAnalytics.data.clientId=t[e].get("clientId"),self.googleAnalytics.initState="success")}else self.googleAnalytics.initState="failed"
self.helpers.sendGoogleAnalyticsDataViaCallback(),biatvConfig.debugMode&&console.log("[%s] %s: %s",Date(),"Completed self.helpers.initGoogleAnalyticsData",self.googleAnalytics.initState,self.googleAnalytics.data)})))},self.helpers.getVisitorData=function(){return self.visitorData},self.helpers.getGoogleAnalyticsData=function(){return self.googleAnalytics.data},self.helpers.getGoogleAnalyticsDataViaCallback=function(t){"failed"===self.googleAnalytics.initState?t(self.helpers.getGoogleAnalyticsData()):"success"===self.googleAnalytics.initState?t(self.helpers.getGoogleAnalyticsData()):self.googleAnalytics.listOfCallbacks.push(t)},self.helpers.sendGoogleAnalyticsDataViaCallback=function(){for(var t=0;t<self.googleAnalytics.listOfCallbacks.length;t++)"function"==typeof self.googleAnalytics.listOfCallbacks[t]&&self.googleAnalytics.listOfCallbacks[t](self.helpers.getGoogleAnalyticsData())
self.googleAnalytics.listOfCallbacks=[]},self.helpers.parseQueryString=function(t){for(var e,a=/[?&]([^=#&]+)=([^&#]*)/g,i={};e=a.exec(t);)try{i[decodeURIComponent(e[1])]=decodeURIComponent(e[2])}catch(t){}return i},self.helpers.parseReferrer=function(t){var e={hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",port:"",protocol:"",search:""}
if(""!==t){var a=document.createElement("a")
a.href=t,e.hash=a.hash,e.host=a.host,e.hostname=a.hostname,e.href=a.href,e.origin=a.origin,e.pathname=a.pathname,e.port=a.port,e.protocol=a.protocol,e.search=a.search}return e},this}
Date.now||(Date.now=function(){return(new Date).getTime()})}}(document,window,"script")
